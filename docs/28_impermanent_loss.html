<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Impermanent loss - DeFi Primer</title>
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="favicon.svg">
                        <link rel="shortcut icon" href="favicon.png">
                <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
                <link rel="stylesheet" href="css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="00_introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="01_what_is_defi.html"><strong aria-hidden="true">2.</strong> What is DeFi?</a></li><li class="chapter-item expanded "><a href="02_defi_wallets.html"><strong aria-hidden="true">3.</strong> Defi wallets</a></li><li class="chapter-item expanded "><a href="03_smart_contracts.html"><strong aria-hidden="true">4.</strong> Smart contracts</a></li><li class="chapter-item expanded "><a href="04_non_fungible_tokens.html"><strong aria-hidden="true">5.</strong> Non fungible tokens</a></li><li class="chapter-item expanded "><a href="05_liquidity_pools.html"><strong aria-hidden="true">6.</strong> Liquidity pools</a></li><li class="chapter-item expanded "><a href="06_oracles.html"><strong aria-hidden="true">7.</strong> Oracles</a></li><li class="chapter-item expanded "><a href="07_wrapped_bitcoin.html"><strong aria-hidden="true">8.</strong> Wrapped bitcoin</a></li><li class="chapter-item expanded "><a href="08_forks.html"><strong aria-hidden="true">9.</strong> Forks</a></li><li class="chapter-item expanded "><a href="09_lending_and_borrowing.html"><strong aria-hidden="true">10.</strong> Lending and borrowing</a></li><li class="chapter-item expanded "><a href="10_margin_trading.html"><strong aria-hidden="true">11.</strong> Margin trading</a></li><li class="chapter-item expanded "><a href="11_derivatives.html"><strong aria-hidden="true">12.</strong> Derivatives</a></li><li class="chapter-item expanded "><a href="12_indices.html"><strong aria-hidden="true">13.</strong> Indices</a></li><li class="chapter-item expanded "><a href="13_consensus_algorithms.html"><strong aria-hidden="true">14.</strong> Consensus algorithms</a></li><li class="chapter-item expanded "><a href="14_stablecoins.html"><strong aria-hidden="true">15.</strong> Stablecoins</a></li><li class="chapter-item expanded "><a href="15_yield_farming.html"><strong aria-hidden="true">16.</strong> Yield farming</a></li><li class="chapter-item expanded "><a href="16_sidechains.html"><strong aria-hidden="true">17.</strong> Sidechains</a></li><li class="chapter-item expanded "><a href="17_zk_rollups.html"><strong aria-hidden="true">18.</strong> ZK Rollups</a></li><li class="chapter-item expanded "><a href="18_50_terms.html"><strong aria-hidden="true">19.</strong> 50 Common Terms in Crypto</a></li><li class="chapter-item expanded "><a href="19_token_types.html"><strong aria-hidden="true">20.</strong> Token types</a></li><li class="chapter-item expanded "><a href="20_airdrops.html"><strong aria-hidden="true">21.</strong> Airdrops</a></li><li class="chapter-item expanded "><a href="21_vaults.html"><strong aria-hidden="true">22.</strong> Vaults</a></li><li class="chapter-item expanded "><a href="22_refills.html"><strong aria-hidden="true">23.</strong> Refills</a></li><li class="chapter-item expanded "><a href="23_crypto_attacks.html"><strong aria-hidden="true">24.</strong> Crypto Attacks</a></li><li class="chapter-item expanded "><a href="24_metamask.html"><strong aria-hidden="true">25.</strong> Metamask</a></li><li class="chapter-item expanded "><a href="25_arbitrum.html"><strong aria-hidden="true">26.</strong> Arbitrum</a></li><li class="chapter-item expanded "><a href="26_lp_tokens.html"><strong aria-hidden="true">27.</strong> LP tokens</a></li><li class="chapter-item expanded "><a href="27_market_psychology.html"><strong aria-hidden="true">28.</strong> Market psychology</a></li><li class="chapter-item expanded "><a href="28_impermanent_loss.html" class="active"><strong aria-hidden="true">29.</strong> Impermanent loss</a></li><li class="chapter-item expanded "><a href="29_impermanent_loss_pt_2.html"><strong aria-hidden="true">30.</strong> Impermanent loss Pt 2</a></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">DeFi Primer</h1>

                    <div class="right-buttons">
                                                <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="impermanent-loss"><a class="header" href="#impermanent-loss">Impermanent Loss</a></h1>
<p>What is the most popular term in DeFi which you have never heard of in traditional world? Probably aping in, but let's assume it's impermanent loss (IL). Every liquidity provider in AMM suffered from IL. But do you know that you can beat it? Read this article to find out how.</p>
<h2 id="impermanent-loss-explained"><a class="header" href="#impermanent-loss-explained">Impermanent loss explained</a></h2>
<p>Let's start with a quick definition of IL. It's a difference in value between your current assets in liquidity pool (LP) and assets you would have if you hadn't added them to LP.</p>
<p>In other words: <strong>IL = current assets at current prices - initial assets at current prices</strong></p>
<p>Why current assets are different than initial assets? Because this is how AMM works: each trade changes the amount of both tokens (x and y) in LP so that their product remains constant <strong>(x*y=k)</strong>. It's like automatic rebalancing of your portfolio consisting of tokens x and y.</p>
<p>So if the price of token x (e.g. ETH) goes up and y (e.g. DAI) remains stable, your porfolio (LP) is rebalanced by selling ETH to DAI so that value of ETH equals value of DAI. As a result, you will have less ETH and more DAI in LP but the value of both assets will be the same.</p>
<p>This auto-rebalancing also means that the AMM has paper hands: each price increase in ETH results in selling a bit of your ETH to DAI. That's why your initial assets at current prices would be worth more outside of LP, you would HODL ETH without selling on the way up.</p>
<p>The example mentioned above shows that IL is pretty painful in LPs with volatile assets and stablecoins. We come to the 1st (obvious) tip: <strong>1: To minimise IL, add to LP positively correlated assets.</strong> ETH and WBTC are perfect example. They are highly correlated, which means there's a low risk of IL.</p>
<h2 id="volume-to-liquidity-ratio"><a class="header" href="#volume-to-liquidity-ratio">Volume to liquidity ratio</a></h2>
<p>When using AMMs, traders pay a fee which goes to liquidity providers. It's a source of passive income which can mitigate IL or even produce net surplus. How much fees you earn depends on trading volume. The higher the volume, the more fees for liquidity providers.</p>
<p>However, you have to share the fees with other liquidity providers. So your passive income from fees depends also on total liquidity in LP. The lower the total liquidity is, the higher share of LP you own and the higher fees you collect. What matters is volume to liquidity ratio (V/L).</p>
<p>The higher V/L, the more fees you earn, for example:</p>
<ul>
<li>For daily V/L of 1 and 0.3% swap fee, your 1$ of liquidity earns V/L * 0.3% = 0.003$ daily, i.e. 1.095$ annualized (109.5% APY).</li>
<li>For V/L = 2, your LP APY = 2 * 0.003$ * 365 = 219%.</li>
</ul>
<p><strong>Second tip: 2: To offset IL, look for LPs with high V/L.</strong></p>
<p>Where to look for pairs with high V/L? <a href="https://t.co/6jZgAQADtD?amp=1">https://info.uniswap.org/pairs</a> and <a href="https://t.co/8Bc0wmflbI?amp=1">https://app.sushi.com/pairs</a> list all LPs with their APY based on daily fees annualized. So for Uniswap this APY is calculated in the way I described above, i.e. 0.3% * Volume (24hr) / Liquidity * 365.</p>
<p>Does 100% APY mean you will double your investment in a year? Not at all. Firstly, APY is based on V/L from last 24 hours: there is no guarantee it will stay the same. Secondly, it completely disregards the existence of IL which can be bigger than total profits from fees.</p>
<h2 id="averaging-your-entry"><a class="header" href="#averaging-your-entry">Averaging your entry</a></h2>
<p>So you need a better tool which accounts for both Fees APY and negative IL APY to get Net APY: your net profit in LP. The best one I've used so far is from APY.vision. It allows you to investigate the historical performance of LP. Let's check a few of their dashboards.</p>
<p>THe dashboard shows Fees APY, IL APY and Net APY depending on the entry time into LP. See ETH-DAI UNI LP below. If you entered this LP 30 days ago, your APY would be close to 50%. However, APY since inception (11.05.2020) is -26% - IL APY is double Fees APY.</p>
<p>​</p>
<p><img src="https://preview.redd.it/9hvo743cxni71.jpg?width=1102&amp;format=pjpg&amp;auto=webp&amp;s=68e8665628ecce7c6b355806d565bc27d8a429e6" alt="" /></p>
<p>Example above shows that even in a longer term (300 days) fees accrued in LP may not offset IL. But there is still a way how to counteract this. <strong>It's my 3rd tip: 3: Average your entry to LP to minimise impact of IL.</strong> It basically means to add to LP multiple times.</p>
<p>Each time you add to LP, you average your entry prices. The aim is to minimise the difference between average entry price ratio and current price ratio between two tokens in LP: the lower the difference, the lower IL. See IL APY in ETH-DAI with average prices since inception.</p>
<p>​</p>
<p><img src="https://preview.redd.it/n6nz15xcxni71.jpg?width=1108&amp;format=pjpg&amp;auto=webp&amp;s=b61282d8a56a549d20099c80450f2ea06b0cec10" alt="" /></p>
<p><a href="https://apy.vision/">APY.vision</a> shows avg entry prices for your LPs in PRO mode but even in free version you see price changes (current vs avg entry) so you immediately know if one token outperforms the other. Your target is to keep these percentages close (low IL).</p>
<h2 id="reserve--volume"><a class="header" href="#reserve--volume">Reserve / Volume</a></h2>
<p>This is another useful dashboard from <a href="https://apy.vision/">APY.vision</a> which shows V/L ratio (Reserves = Liquidity) each day. It doesn't account for IL, but it lets you see changes in V/L in time which may be useful in a short term LP strategy. See the graph from INV-ETH LP as an example.</p>
<p>​</p>
<p><img src="https://preview.redd.it/2cqqmtzdxni71.jpg?width=1105&amp;format=pjpg&amp;auto=webp&amp;s=3ee56a56e18992453aa483e3300791c2d4d79f48" alt="" /></p>
<p>V/L in first days: 19.02, 17.05, 14.30, 5.46. This corresponds to APYs: 2083%, 1867%, 1566%, 598%. Such a high V/L is what you want in short term LP strategy - in 4 days you'd earn 17% on your liquidity, excluding potential IL. Let's focus on where to look for such high V/L.</p>
<p>The best LPs to benefit from high V/L are the ones with low IL. You want price to move inside a horizontal corridor as long as possible to maximise your profits from trading fees. <strong>This is my 4th tip: 4: Take advantage of LPs with high V/L and low IL.</strong></p>
<p>My best picks for pools with high V/L and low IL:</p>
<ul>
<li>Tokens after IDO: huge hype =&gt; huge volume, price stays often flat at least for a few days until presalers and public sale participants end their dump.</li>
<li>Tokens sold outside of AMMs on bonding curve for a limited audience (e.g. KYCed only): bonding curve = no sudden price movements; limits on participation = high volume on AMM with low liquidity =&gt; high V/L.</li>
</ul>
<p>You can track your current LPs in <a href="https://t.co/a1obAJcbdC?amp=1">http://apy.vision</a>. If &quot;Gains From Providing Liquidity&quot; are positive, you're doing it right - you're making more than hodling. If they are negative, IL is winning - maybe you should add to LP to average your entry prices to mitigate it.</p>
<p>Sometimes fees alone can't offset IL but you can still earn a lot. <strong>That's my 5th tip: 5: Stake your LP tokens to earn in liquidity mining (LM) programs</strong>. Projects often reward liquidity providers with their own tokens (LM APY). Your Net APY = Fees APY + LM APY - IL APY.</p>
<p>Last piece of advice concerns exiting LP: <strong>6: Time your exit to minimise impact of IL</strong>. The best time to exit is when current price ratio is close to average entry price ratio. So don't rush, wait and monitor your positions. Add to LP if needed.</p>
<p>You are going to make it.</p>
<p>​</p>
<ul>
<li>Interested in what LP-tokens are and why they play such a big role in DeFi? <a href="https://www.reddit.com/r/CryptoCurrency/comments/p79uia/defi_explained_lptokens/">Find out here</a>.</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                                                    <a rel="prev" href="27_market_psychology.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                                                    <a rel="next" href="29_impermanent_loss_pt_2.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                                    <a rel="prev" href="27_market_psychology.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                                    <a rel="next" href="29_impermanent_loss_pt_2.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        
    </body>
</html>
